name: Jekyll site CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest
 
    steps:
    - name: Check out Git repositor
      uses: actions/checkout@v3
    - name: Install dependencies
      run: |
       mkdir SampleArtifact
    - name: Check out Git repositor
      uses: actions/checkout@v3
      with:
        node-version : '17.x'
        # Install newman and reporter
    - name: Install newman   
      run: |
       npm install -g newman
       npm install -g newman-reporter-htmlextra
    - name: Run collection
      if: always()
      run: |
       newman run "NorthBound.postman_collection.json" -e "NorthBoundDev.postman_environment.json" -g "workspace.postman_globals.json" -r htmlextra --reporter-htmlextra-export SampleArtifact/report.html
    - name: publish report
      uses: actions/checkout@v3
      with:
       name: Reports
       path: SampleArtifact